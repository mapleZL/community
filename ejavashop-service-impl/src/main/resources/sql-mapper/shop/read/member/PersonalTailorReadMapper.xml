<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ejavashop.dao.shop.read.member.PersonalTailorReadDao">
	
	<select id="get" parameterType="Integer" resultType="com.ejavashop.entity.member.PersonalTailor">
		select
		   *
		from `personal_tailor`
		where `id` = #{id}
	</select>
	
	<select id="getCount" parameterType="java.util.Map" resultType="java.lang.Integer">
		select count(1) from `personal_tailor` p where 1=1
		<include refid="getTailor" />
	</select>
	
	<select id="page" parameterType="java.util.Map" resultType="com.ejavashop.entity.member.PersonalTailor">
		select p.*,
			   pt.tailor_description,
			   (select name from member where id = p.member_id) as member_name 
			   		from personal_tailor p,personal_tailor_picture pt 
			   				where p.id = pt.personal_tailor_id
			   	<include refid="getTailor" />
			   	<if test="size != null and size &gt; 0">limit #{start},#{size}</if>
	</select>
	
	<sql id="getTailor">
			<if test="q_memberName != null and q_memberName != '' ">
			    and p.member_id = (select id from member where name= #{q_memberName})
			</if>
			<if test="q_createTimes != null and q_createTimes != '' ">
				and p.createTime &gt;= #{q_createTimes}
			</if>
			<if test="q_createTimee != null and q_createTimee != '' ">
				and p.createTime &lt;= #{q_createTimee}
			</if>
	</sql>
	
	
	
</mapper>